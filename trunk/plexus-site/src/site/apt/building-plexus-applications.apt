 -----
Plexus Applications and Runtimes
 -----
Trygve Laugstol
 -----

Building Plexus Applications and Runtimes

 To be able to build Plexus applications and runtimes you'll need:

 * The Plexus mojo

 * The Plexus application archetype

 * The Plexus runtime archetype

 <<<TODO: Make a link to the maven site that explains what a archetype is.>>>

Creating the Enviroment

 To start off we'll make some stub directories:

+-----------------------------------------------------------------------------+
$ mkdir my-application
$ mkdir my-runtime
+-----------------------------------------------------------------------------+

 [<<</my-application>>>] - Here we'll make a application

 [<<</my-runtime>>>] - Here we'll make a runtime that will host your
  application.  This runtime will contain startup scripts for Unix, Windows and
  OS X and will be completly standalone.

Creating the Application

* Making the Application Stub

 In <<</my-application>>> execute this to make a stub Plexus application:

+-----------------------------------------------------------------------------+
$ m2 archetype:create \
    -DarchetypeGroupId=plexus \
    -DarchetypeArtifactId=plexus-archetype-application \
    -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
    -DgroupId=mygroup \
    -DartifactId=my-application \
    -Dversion=1.0 \
    -Dpackage=my.app
+-----------------------------------------------------------------------------+

* Building the Plexus Application

  <<TODO: plexus:app should not copy *.pom into /lib>>

+-----------------------------------------------------------------------------+
$ m2 plexus:app
+-----------------------------------------------------------------------------+

 Now you should have a application in <<<target/plexus-application>>>. The
 <<<plexus:app>>> goal will also package the application ready for deployment.
 Our example application JAR will be
 <<<target/my-application-1.0-application.jar>>>.

Creating the Runtime

* Making the Runtime Stub

 Creating the stub runtime is as easy as creating the application. In
 <<</my-runtime>>> execute:

+-----------------------------------------------------------------------------+
$ m2 archetype:create \
    -DarchetypeGroupId=plexus \
    -DarchetypeArtifactId=plexus-archetype-runtime \
    -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
    -DgroupId=mygroup \
    -DartifactId=my-runtime \
    -Dversion=1.0 \
    -Dpackage=my.runtime
+-----------------------------------------------------------------------------+

* Building the Runtime

  <<TODO: plexus:runtime shouldn't depend on jar:install. In fact it probably
  shouldn't copy the artifact at all as the output of a "plexus runtime"
  project is the runtime itself.>>

+-----------------------------------------------------------------------------+
$ m2 plexus:runtime
+-----------------------------------------------------------------------------+

 You should now have a usable runtime in <<<target/plexus-runtime>>> and a
 packaged runtime in <<<target/my-runtime-1.0-runtime.jar>>>. Now lets copy
 over the application:

+-----------------------------------------------------------------------------+
$ cp ../my-application/target/my-application-1.0-application.jar target/plexus-runtime/apps
+-----------------------------------------------------------------------------+

 Now you have a working Plexus runtime with your application installed. To
 start it run:

+-----------------------------------------------------------------------------+
$ sh target/plexus-runtime/bin/plexus.sh
+-----------------------------------------------------------------------------+
